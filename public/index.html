<!DOCTYPE html> 
<html> 
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1"> 
	<title>笑笑爸爸的微博</title> 
	<link rel="stylesheet" href="//code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.css" />
	<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
	<script src="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.js"></script>
	<script src=" http://tjs.sjs.sinajs.cn/open/api/js/wb.js?appkey=1909920597" type="text/javascript" charset="utf-8"></script>
	<style>
	li{
		list-style:none;
	}
	.tweetList{
		border-bottom:1px solid #333;
		padding:10px 0;
		overflow:hidden;
	}
	.retweet{
		margin:10px 30px;
		overflow:hidden;
		padding:10px;
		background:#ccc;
	}
	.userProfileImg{
		float:left;
		margin-right:20px;
	}
	</style>
</head> 
<body>             


	<!-- Start of first page: #one -->
	<div data-role="page" id="one">

		<div data-role="header">
			<h1>笑笑爸爸的微博</h1>
		</div><!-- /header -->

		<div data-role="content" >	
			<!-- <a href="https://api.weibo.com/oauth2/authorize?client_id=1909920597&response_type=token&redirect_uri=http://jason.me:3000/">connect weibo</a> -->
			
			<ul class="homeTimeLine" id="homeTimeLine">
				
			</ul>
			
			
			<p><a href="#two" data-role="button">Show page "two"</a></p>	
			<p><a href="#popup"data-role="button" data-rel="dialog" data-transition="pop">Show page "popup" (as a dialog)</a></p>
		</div><!-- /content -->

		<div data-role="footer" data-theme="d">
			<h4>Page Footer</h4>
		</div><!-- /footer -->
	</div><!-- /page one -->


	<!-- Start of second page: #two -->
	<div data-role="page" id="two" data-theme="a">

		<div data-role="header">
			<h1>Two</h1>
		</div><!-- /header -->

		<div data-role="content" data-theme="a">	
			

		<div data-role="footer">
			<h4>Page Footer</h4>
		</div><!-- /footer -->
	</div><!-- /page two -->


	<!-- Start of third page: #popup -->
	<div data-role="page" id="popup">

		<div data-role="header" data-theme="e">
			<h1>Dialog</h1>
		</div><!-- /header -->

		<div data-role="content" data-theme="d">	
			

		<div data-role="footer">
			<h4>Page Footer</h4>
		</div><!-- /footer -->
	</div><!-- /page popup -->

<script>

	var xiaoxiaoWB = {
		home_timeline : function(){
			WB2.anyWhere(function(W){
			W.parseCMD("/statuses/home_timeline.json", function(sResult, bStatus){
						for(i=0;i<sResult.length;i++){
							
							if( sResult[i].thumbnail_pic ){
								$('#homeTimeLine').append("<li class='tweetList  tweetList" + i + "' data-role='listview'>" + "<img class='userProfileImg' src=" +sResult[i].user.profile_image_url+ " />" + sResult[i].user.screen_name + "<br />" + sResult[i].text + "<br />"+ "<a href=" +sResult[i].original_pic+ "><img class='thumbnail_pic' src="+sResult[i].thumbnail_pic+" /></a>" + "<li>");
								}else{
									$('#homeTimeLine').append("<li class='tweetList  tweetList" + i + "' data-role='listview'>" + "<img class='userProfileImg' src=" +sResult[i].user.profile_image_url+ " />" + sResult[i].user.screen_name+ "<br />"+sResult[i].text + "<li>");
								};
								
							if( sResult[i].retweeted_status ){
								$("#homeTimeLine .tweetList"+i).append("<li class='retweet'>" + sResult[i].retweeted_status.user.screen_name+ "<br />"+sResult[i].retweeted_status.text  + "<li>");
							}else if( sResult[i].retweeted_status && sResult[i].retweeted_status.thumbnail_pic ){
								$("#homeTimeLine .tweetList"+i).append("<li class='retweet'>" + sResult[i].retweeted_status.user.screen_name+ "<br />"+sResult[i].retweeted_status.text + "<br />"+ "<a href=" +sResult[i].retweeted_status.original_pic+"<img src="+sResult[i].retweeted_status.thumbnail_pic+" /></a>" + "<li>");
							}
							
						}
						console.log(sResult);
			},{
				count:'100'
			},{
			    method: 'post'
			});
			});
		}
	}
	
	xiaoxiaoWB.home_timeline();
</script>

</body>
</html>